<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Configure the AMQP plug-in to monitor vCloud Director - vCO Team</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="Learn how to configure the AMQP plug-in to work with vCD">
		<meta property="og:title" content="Configure the AMQP plug-in to monitor vCloud Director" />
<meta property="og:description" content="Learn how to configure the AMQP plug-in to work with vCD" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://www.vcoteam.info/articles/learn-vco/179-configure-the-amqp-plug-in.html" /><meta property="article:section" content="articles" />
<meta property="article:published_time" content="2011-09-09T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2011-09-09T00:00:00&#43;00:00" />


		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Configure the AMQP plug-in to monitor vCloud Director"/>
<meta name="twitter:description" content="Learn how to configure the AMQP plug-in to work with vCD"/>

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/custom.min.css">
	<link rel="shortcut icon" href="/images/vco-logo.png">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-16400053-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo logo--mixed">
		<a class="logo__link" href="/" title="vCO Team" rel="home">
			<div class="logo__item logo__imagebox">
					<img alt="vCO Team avatar" class="logo__img" src="https://www.vcoteam.info/images/vco-logo.png">
				</div><div class="logo__item logo__text">
					<div class="logo__title">vCO Team</div>
					
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">Home</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/articles/home-lab.html">
				
				<span class="menu__text">Home Lab</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/articles/learn-vco.html">
				
				<span class="menu__text">Learn VCO</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/links.html">
				
				<span class="menu__text">Links</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/articles/newsflash.html">
				
				<span class="menu__text">newsflash</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/question-answer.html">
				
				<span class="menu__text">Q&amp;A</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/articles/vco-features.html">
				
				<span class="menu__text">vCO Features</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
  <article class="post">
    <header class="post__header">
      <h1 class="post__title">Configure the AMQP plug-in to monitor vCloud Director</h1>
      <div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2011-09-09T00:00:00Z">September 09, 2011</time></div>
</div>
    </header><div class="content post__content clearfix">
      <p>OK, so we told you about the great new plug-in that VMware has made available for vCO to work with AMQP, but now what? You'll need a couple things to get started before you can run off and code a bunch of cool workflows so let's step through this initial process...</p>
<ul>
<li>Get and Install AMQP Server (RabbitMQ)</li>
<li>Configure Publisher (vCloud Director 1.5)</li>
<li>Configure Consumer (vCenter Orchestrator)
<ul>
<li>Apply Policy Template to create new Policy</li>
<li>How to create new Policy manually</li>
<li>Starting the Policy</li>
</ul>
</li>
</ul>

<h2>Get and install an AMQP server.</h2>
<p>For the tutorial I used a Debian based Linux and got rabbitMQ and installed it doing: sudo apt-get install rabbitmq-server</p>
<p>If you do not have an AMQP server yet you can do this or get RabbitMQ from <a href="http://www.rabbitmq.com/download.html">here</a>. There are versions for different platforms. If you did not install your AMQP broker yet you can follow these <a href="http://www.rabbitmq.com/install.html">directions</a>.</p>
<p>The AMQP plug-in documentation does not mention which versions are compatible. The plug-in was done using AMQP version 0-9-1 and tested against RabbitMQ. This tutorial was done using version 2.4 but newer version should work as well.</p>
<h2>AMQP configuration</h2>
<p>The AMQP installation provides a default configuration allowing to start the server and use it right away. This is what I used in this tutorial.</p>
<p>If you intend to run AMQP in production it is recommended to configure the server to make it secure.</p>
<h2>Publisher Configuration</h2>
<p>We need to feed the message bus. Configure your message publisher with your AMQP host information. In this tutorial vCloud Director 1.5 is used as the publisher.</p>
<p>Log in as a system administrator to vCloud Director (A tenant administrator cannot configure AMQP settings) and go to Administration / System Settings / Blocking Tasks. On the settings tab Enable Notifications and the AMQP Settings as follows (or differently if you customized the settings - be sure to use the FQDN or IP of your AMQP server).</p>
<p><img src="/images/configure-amqp/vcdamqp_settings.png" alt="vCD AMQP Settings" /></p>
<p>The default password is guest.</p>
<p>Once done, click on Test AMQP Connection. If successful your vCloud Director Server will now send notification messages for all kind of events.</p>
<p><img src="/images/configure-amqp/amqp-connection-succeeded.png" alt="AMQP Connection Succeeded" width="250" height="125" /></p>
<h2>Step by step AMQP consumer vCO configuration.</h2>
<ol><ol>
<li>Open your vCO client, search for the "Add a broker" workflow. Start it and set it as follows:<br /> <img src="/images/configure-amqp/001_add_amqp_broker.png" alt="Add AMQP broker" width="500" /><br /> </li>
<li>This will create a new broker connection in the inventory. We are now going to declare a message queue for vCO. Search and start the "Declare a queue" workflow. Select the broker you have just created, name your queue and its options.<br /> <img src="/images/configure-amqp/002_declare_a_queue.png" alt="Declare a queue" width="500" /><br /> </li>
<li>The vCloud Director is publishing the messages to an Exchange named systemExchange. <span style="color: #0000ff;">[edited] <span style="text-decoration: line-through;">We do not need to declare an exchange since it was already declared by vCloud Director</span>. It seems vCD does not necessarely declare the exchange. To make sure it is done declare it on vCO side run the "Declare an exchange" workflow and select the following options. <img src="/images/configure-amqp/amqp_exchange.png" alt="alt" width="307" height="110" /> [/edited] </span></li>
</ol></ol><br /><ol>
<li>What we need to do next is to bind the systemExchange to the vCO queue. For this search for the "bind" workflow and declare the binding as follows:<br /> <img src="/images/configure-amqp/003b_bind.png" alt="Declare a binding" width="500" /><br /> </li>
<li>The vCloud notification messages routing key has the following syntax format:<br /> <strong>{operationSuccess}.{entityUUID}.{orgUUID}.{userUUID}.{subType1}.{subType2}...{subTypeN}.{taskName}</strong> <br /> <br />
<div class="attention">
<div class="typo-icon">The queue routing key supports the "*" and "#" wildcard characters to match a single segment and zero or more segments. For example true.*.*.*. com.vmware.vcloud.event.vm.create or true.#.com.vmware.vcloud.event.vm.create will route a notification to the queue with this binding key every time any user from any organization successfully creates a VM). In the example above we route every messages to the vco queue.</div>
</div>
</li>
<li>Now that we have a vco queue we need to subscribe to it so the AMQP plug-in can receive new messages automatically. Search for "Subscribe to queues" workflow, start and set as follows:<br /> <img src="/images/configure-amqp/004_subscribe_to_queues.png" alt="Subscribe to queues" width="500" /><br /> <br />
<div class="attention">
<div class="typo-icon">When a message queue is subscribed the existing and new messages stored in this queue are consumed: the become available in vCO and are deleted from the queue. Now we need to create a workflow consuming these messages. For educational purposes we are just going to list all the information available in these messages to monitor vCD.</div>
</div>
</li>
<li>Create a new workflow and call it "Display AMQP Message properties". Edit the workflow.
<ul>
<li>Add an input parameter "subscription" of type AMQP:Subscription.</li>
<li>Add a Scriptable task (Generic tab), rename it "Consume message"</li>
<li>Link the subscription input as input to the scriptable task<br /> </li>
</ul>
</li>
<li>Copy the following code into it.

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">props</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">subscription</span>.<span style="color:#a6e22e">retrieveLastOnMessageTrigger</span>();
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">messageBody</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;body&#39;</span>); <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">headers</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;headers&#39;</span>); <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">properties</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;properties&#39;</span>); 
<span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;notification.type : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">headers</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;notification.type&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;notification.orgUUID : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">headers</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;notification.orgUUID&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;notification.entityType : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">headers</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;notification.entityType&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;notification.entityUUID : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">headers</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;notification.entityUUID&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;notification.userUUID : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">headers</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;notification.userUUID&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;notification.operationSuccess : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">headers</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;notification.operationSuccess&#34;</span>)<span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\n&#34;</span>); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;messageBody : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">messageBody</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\n&#34;</span>); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;receivedRoutingKey : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">properties</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;receivedRoutingKey&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;messageCount : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">properties</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;messageCount&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;deliveryMode : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">properties</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;deliveryMode&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;priority : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">properties</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;priority&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;deliveryTag : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">properties</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;deliveryTag&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;contentType : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">properties</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;contentType&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;contentEncoding : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">properties</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;contentEncoding&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;receivedExchange : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">properties</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;receivedExchange&#34;</span>)); <span style="color:#a6e22e">System</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;contentLength : &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">properties</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;contentLength&#34;</span>));
</code></pre></td></tr></table>
</div>
</div>

</li>
<li>Add an end, link it, validate the workflow.<br /> </li>
<li>Save and close. The workflow should look like below:<br /> <img src="/images/configure-amqp/display_amqp_properties.png" alt="Display AMQP properties" /></li>
</ol>
<p>Now that we have a subscription to the message queue and a workflow to consume messages we need to create a policy starting this workflow on new messages. The AMQP Plug-in provides a Subscription Policy Template that we can apply.</p>
<h2>Apply a Policy Template to create new Policy</h2>
<ol>
<li>In the Policy Templates tab, expand out the tree to display the Library\AMQP\Subscription entry<br /> </li>
<li>Right click on the <strong>Subscription</strong> Policy Template and click Apply Policy <br /><img src="/images/configure-amqp/apply-subscription-policy-template.png" alt="Apply Subscription Policy Template" width="354" height="313" /> <br /> </li>
<li>When prompted for the inputs, select your <strong>vco</strong> Subscription that was created earlier, for the first two fields you may keep the defaults. Click Submit when done:<br /> <img src="/images/configure-amqp/amqp-apply-policy.png" alt="Apply Policy" width="500" /><br /> </li>
<li>Next, the new policy must be edited to specify which workflow is to be executed. Click the Policies tab on the left, then select and edit the <strong>Subscription </strong>policy:<br /> <img src="/images/configure-amqp/edit-subscription-policy.png" alt="Edit Subscription Policy" width="288" height="182" /><br /> </li>
<li>On the General tab, for startup: Select <strong>On server startup, start the policy</strong>. This tells vCO to start the policy each time the server is started or rebooted.<br /> </li>
<li>Next, click on the Scripting tab, then select the <strong>OnMessage</strong> trigger event. In the bottom pane, click the magnifying glass icon to browse for and select the <strong>Display AMQP Message properties</strong> workflow that was created earlier. <br /> <img src="/images/configure-amqp/select-onmessage-set-workflow.png" alt="Select onMessage and set workflow" width="500" /><br /> </li>
<li>Under the <strong>Source Parameter</strong> column, click <em><strong>not set</strong></em> and use the chooser to set that value to self:<br /><img src="/images/configure-amqp/amqp-choose-self.png" alt="Choose Self" width="500" /><br /> </li>
<li>Once you have the Subscription specified, you may click Save and Close</li>
</ol>
<h3>To Create a new Policy Manually</h3>
<div class="note">
<div class="typo-icon">NOTE: This step is not required if you applied the policy template as described in the previous section. This section is provided for reference on how to manually create a policy.</div>
</div>
<ol>
<li>In the policy tab right click / Create a new policy<br /> <img src="/images/configure-amqp/005_create_policy.png" alt="Create New Policy" /><br /> </li>
<li>Name it as such:<br /> <img src="/images/configure-amqp/006_create_policy.png" alt="Create Policy Name" /><br /> </li>
<li>Click on "Add policy element" (gear icon on the left)<br /> <img src="/images/configure-amqp/007_add_policy_element.png" alt="Add Policy Element" /><br /> </li>
<li>Select AMQP:Subscription for type (the list below may vary depending on which plug-in is active on your server)<br /> <img src="/images/configure-amqp/008_add_policy_element.png" alt="Select Type" width="500" /><br /> </li>
<li>Type vco in the Filter to find the vco subscription you created previously.<br /> <img src="/images/configure-amqp/009_add_policy_element.png" alt="Find Subscription" /><br /> </li>
<li>Rename the policy element to "Subscription"<br /> <img src="/images/configure-amqp/010_set_policy_element_name.png" alt="Set Policy Element Name" /><br /> </li>
<li>With Subscription selected click on "Add trigger event..."<br /> <img src="/images/configure-amqp/011_add_trigger_event.png" alt="Add Trigger Event" /><br /> </li>
<li>Select "onMessage:<br /> <img src="/images/configure-amqp/012_add_trigger_event.png" alt="Select onMessage" /><br /> </li>
<li>Type "amqp in the filter" and select the workflow you have created to consume the message.<br /> <img src="/images/configure-amqp/013_set_workflow.png" alt="Select amqp" width="500" /><br /> </li>
<li>Click on the workflow "not set: workflow parameter <br /> <img src="/images/configure-amqp/014_set_workflow_parameter.png" alt="Click Not Set" width="500" /><br /> </li>
<li>Select "self"<br /> <img src="/images/configure-amqp/015_set_workflow_parameter.png" alt="Select self" width="500" /><br /> </li>
<li>On the general tab you can optionally set your policy to start on server startup.<br /> </li>
<li>Save and close.</li>
</ol>
<h2>Starting the Policy</h2>
<ol>
<li>Right click on policy / start.<br /> </li>
<li>Check the policy log tab to see if workflows where started.<br /> <img src="/images/configure-amqp/policy_logs.png" alt="Policy Logs" width="500" /><br /> </li>
<li>Open the "Display AMQP Message properties" workflow logs tab on the workflow runs to check the content of the messages.<br /> You should see something like this:<br />
<pre class="brush:text">[2011-08-17 21:55:54.724] [I] Started from policy : Handle vCD Messages [2011-08-17 21:55:54.893] [I] notification.type : com/vmware/vcloud/event/task/complete [2011-08-17 21:55:54.894] [I] notification.orgUUID : 853ebd05-a19a-438e-9d85-1b528c69ca12 [2011-08-17 21:55:54.894] [I] notification.entityType : com.vmware.vcloud.entity.task [2011-08-17 21:55:54.894] [I] notification.entityUUID : 634a2aaa-0e4c-47c5-9ad7-dc20df251f83 [2011-08-17 21:55:54.894] [I] notification.userUUID : c1d18808-7685-439b-84b5-654862c0f5c0 [2011-08-17 21:55:54.895] [I] notification.operationSuccess : false [2011-08-17 21:55:54.895] [I] messageBody : </pre>
<pre class="brush:xml">2011-08-17T15:44:35.573-04:00
false</pre>
<pre class="brush:text">2011-08-17T15:44:35.573-04:00 false [2011-08-17 21:55:54.895] [I] receivedRoutingKey : false.634a2aaa-0e4c-47c5-9ad7-dc20df251f83.853ebd05-a19a-438e-9d85-1b528c69ca12.c1d18808-7685-439b-84b5-654862c0f5c0.com.vmware.vcloud.event.task.complete.vappDeploy [2011-08-17 21:55:54.895] [I] messageCount : 0 [2011-08-17 21:55:54.895] [I] deliveryMode : 2 [2011-08-17 21:55:54.896] [I] priority : 0 [2011-08-17 21:55:54.896] [I] deliveryTag : 18 [2011-08-17 21:55:54.896] [I] contentType : application/xml [2011-08-17 21:55:54.896] [I] contentEncoding : UTF-8 [2011-08-17 21:55:54.896] [I] receivedExchange : systemExchange [2011-08-17 21:55:54.897] [I] contentLength : 0</pre>
</li>
</ol>
<p>The first block is the information in the headers. It contains:</p>
<ul>
<li>the operation (here a task completed)</li>
<li>the type of the object concerned (a task)</li>
<li>the Universally Unique Identifiers for this task, the organization it belongs to and the user who started it</li>
<li>the result of the operation (here the task failed)</li>
</ul>
<p>Using the header is useful for triaging events to take different actions (for example log success, log errors and start a remediation workflow). The UUIDs can be useful for matching against the catalog of object stored in a CMDB.</p>
<p>The second block is the body of the message. It contains additional information such as:</p>
<ul>
<li>The URL link to the vCD server</li>
<li>Links, names and IDs of the entity, user, org</li>
<li>Time of the event</li>
</ul>
<p>(Here the administrator unsuccessfully deployed a vApp 2011-08-17 15:44:35.573 US Eastern time in the organization Christophe). This allows to have basic human readable information without getting further information in a CMDB and optionally use the links to to get further information and take action on objects using the vCloud API.</p>
<p>The last block contains properties on the message such as the routing key and the exchange it was received from. This can be useful information to fine tune the binding between the exchange and queue to avoid handling messages that are of no interest.</p>
    </div>
    <footer class="post__footer">
      
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/vco/" rel="tag">vCO</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/amqp/" rel="tag">AMQP</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/vcd/" rel="tag">vCD</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/plug-in/" rel="tag">Plug-in</a>
		</li>
	</ul>
</div>
    </footer>
  </article>
</main>

  
  
  <div class="authorbox clearfix">
    <figure class="authorbox__avatar">
      <img alt="Christophe Decanini avatar" src="/images/authors/christophe.jpg" class="avatar" height="150" width="150">
    </figure>
    <div class="authorbox__header">
      <span class="authorbox__name"></span>
    </div>
    <div class="authorbox__description">
      Christophe has worked at VMware, Inc., where he started in 2007 after VMware acquired Dunes. Based in Gland, Switzerland, Christophe is a global resource supporting customers in their orchestration and automation needs. He has presented orchestration solutions at conferences such as VMworld and is the primary contributor to this site.
    </div>
    <div class="widget-social__item widget__item">
      <a class="widget-social__link widget__link btn" title="Twitter" rel="noopener noreferrer"
        href="https://twitter.com/cdecanini_" target="_blank">
        <svg class="widget-social__link-icon icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5 0-78.8 35.3-78.8 78.8 0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3-6.7 11.6-10.6 25.2-10.6 39.6 0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1 0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4 0-12.6-.4-18.8-1.1 34.9 22.4 76.3 35.4 120.8 35.4 144.9 0 224.1-120 224.1-224.1 0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg>
      </a>
    </div>
  </div>
  


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/articles/learn-vco/180-extend-vcloud-director-with-vcenter-orchestrator.html" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Extend vCloud Director with vCenter Orchestrator</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/articles/learn-vco/172-take-cloud-automation-scripting-to-another-level-with-cloud-orchestration.html" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Take cloud automation scripting to another level with cloud orchestration</p>
		</a>
	</div>
</nav>



			</div>
			<aside class="sidebar"><div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="https://google.com/search">
		<label>
			<input class="widget-search__field" type="search" placeholder="SEARCH..." value="" name="q" aria-label="SEARCH...">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sitesearch" value="http://www.vcoteam.info/" />
	</form>
</div>
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/articles/synthesis.html">An Honest review of the TTS Service Synthesys</a></li>
			<li class="widget__item"><a class="widget__link" href="/articles/326-building-a-kubernetes-blueprint-for-vra-intro.html">Building a Kubernetes Blueprint for vRealize Automation - Intro</a></li>
			<li class="widget__item"><a class="widget__link" href="/articles/home-lab/325-lightweight-dns-server-for-home-or-test-lab.html">Lightweight DNS Server for Home or Test Lab</a></li>
			<li class="widget__item"><a class="widget__link" href="/articles/newsflash/324-please-share-your-code-at-the-sample-exchange.html">Please share your code at the Sample Exchange</a></li>
			<li class="widget__item"><a class="widget__link" href="/articles/learn-vco/323-how-to-create-a-microsoft-dns-dynamic-types-plug-in.html">How to create a Microsoft DNS Dynamic Types plug-in ?</a></li>
		</ul>
	</div>
</div>
<div class="widget-social widget">
	<h4 class="widget-social__title widget__title">Social</h4>
	<div class="widget-social__content widget__content">
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="Twitter" rel="noopener noreferrer" href="https://twitter.com/vcoteam" target="_blank">
				<svg class="widget-social__link-icon icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5 0-78.8 35.3-78.8 78.8 0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3-6.7 11.6-10.6 25.2-10.6 39.6 0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1 0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4 0-12.6-.4-18.8-1.1 34.9 22.4 76.3 35.4 120.8 35.4 144.9 0 224.1-120 224.1-224.1 0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg>
				<span>Twitter</span>
			</a>
		</div>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Tags</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/tags/ad.html" title="AD">AD (8)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/amqp.html" title="AMQP">AMQP (3)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/api.html" title="API">API (7)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/blueprint.html" title="Blueprint">Blueprint (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/book.html" title="Book">Book (3)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/bootable-usb.html" title="bootable usb">bootable usb (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/cifs.html" title="CIFS">CIFS (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/cim.html" title="CIM">CIM (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/container.html" title="Container">Container (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/coredns.html" title="CoreDNS">CoreDNS (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/curl.html" title="curl">curl (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/dns.html" title="DNS">DNS (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/docker.html" title="docker">docker (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/docker-compose.html" title="docker-compose">docker-compose (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/domain.html" title="Domain">Domain (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/dynamictypes.html" title="DynamicTypes">DynamicTypes (10)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/esxi.html" title="ESXi">ESXi (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/excel.html" title="Excel">Excel (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/f5-networks.html" title="F5 Networks">F5 Networks (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/github.html" title="github">github (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/hackathon.html" title="Hackathon">Hackathon (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/homelab.html" title="homelab">homelab (3)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/horizon.html" title="Horizon">Horizon (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/http.html" title="http">http (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/iaas.html" title="IaaS">IaaS (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/infoblox.html" title="Infoblox">Infoblox (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/json.html" title="json">json (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/kubernetes.html" title="Kubernetes">Kubernetes (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/lab.html" title="Lab">Lab (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/labmanager.html" title="LabManager">LabManager (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/lcm.html" title="LCM">LCM (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/linux.html" title="linux">linux (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/log.html" title="log">log (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/microsoft.html" title="Microsoft">Microsoft (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/netapp.html" title="NetApp">NetApp (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/networkmanager.html" title="networkManager">networkManager (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/nmcli.html" title="nmcli">nmcli (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/nsx.html" title="NSX">NSX (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/nuc.html" title="NUC">NUC (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/onyx.html" title="Onyx">Onyx (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/perl.html" title="perl">perl (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/persepctives.html" title="Persepctives">Persepctives (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/plug-in.html" title="Plug-in">Plug-in (38)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/plug-ins.html" title="plug-ins">plug-ins (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/postman.html" title="postman">postman (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/powercli.html" title="PowerCLI">PowerCLI (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/powershell.html" title="PowerShell">PowerShell (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/presentation.html" title="presentation">presentation (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/python.html" title="python">python (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/rest.html" title="REST">REST (11)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/review.html" title="Review">Review (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/saas.html" title="SaaS">SaaS (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/snmp.html" title="SNMP">SNMP (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/soap.html" title="SOAP">SOAP (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/sql.html" title="SQL">SQL (4)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/ssl.html" title="SSL">SSL (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/storage-i/o.html" title="Storage I/O">Storage I/O (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/swagger.html" title="Swagger">Swagger (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/tts.html" title="TTS">TTS (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/twitter.html" title="Twitter">Twitter (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/ucs.html" title="UCS">UCS (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/uim.html" title="UIM">UIM (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vapi.html" title="vAPI">vAPI (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vcac.html" title="vCAC">vCAC (11)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vcap.html" title="vCAP">vCAP (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vcat.html" title="vCAT">vCAT (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vcd.html" title="vCD">vCD (21)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vcenter.html" title="vCenter">vCenter (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vcenter-orchestrator.html" title="vCenter Orchestrator">vCenter Orchestrator (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vchs.html" title="vCHS">vCHS (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vcloud-director.html" title="vCloud Director">vCloud Director (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vcm.html" title="vCM">vCM (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vco.html" title="vCO">vCO (139)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vix.html" title="VIX">VIX (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vmworld.html" title="VMworld">VMworld (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vra.html" title="vRA">vRA (6)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vra-7.x.html" title="vRA 7.x">vRA 7.x (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vrealize-automation.html" title="vRealize Automation">vRealize Automation (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vrealize-orchestrator.html" title="vRealize Orchestrator">vRealize Orchestrator (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vro.html" title="vRO">vRO (17)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vro-7.x.html" title="vRO 7.x">vRO 7.x (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vsan.html" title="vSAN">vSAN (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vshield.html" title="vShield">vShield (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vsm.html" title="VSM">VSM (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vsphere.html" title="vSphere">vSphere (3)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/vum.html" title="VUM">VUM (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/workflow.html" title="workflow">workflow (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/xaas.html" title="XaaS">XaaS (1)</a>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 vCO Team.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>